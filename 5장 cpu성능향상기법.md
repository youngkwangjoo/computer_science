- 빠른 cpu를 위한 설계기법
    
    클럭, 코어&멀티코어, 스레드&멀티 스레드
    
    1. 컴퓨터 부품들은 클럭 신호에 맞춰 일사분란하게 움직인다. 
    2. cpu는 명령어 사이클이라는 정해진 흐름에 맞춰 명령어들을 실행한다. 
    
    단순히 클럭 신호자체를 빠르게 반복하면? 그만큼 빨라지긴한다. 일반적으로는
    
    클럭의 속도는
    
    - hz단위로 측정
    - 1초에 클럭이 반복되는 횟수 hz
    
    ex) cpu가 클럭이 2.5ghz ~ 4.9ghz라고 되있으면 25번에서 49억번 움직이는걸 뜻한다. 
    
    이건 발열과 연결됨 
    
    Q . 그럼 다른 방법은 없나?
    
    A. 
    
    1. 코어수를 늘리는 방법
    2. 스레드 수를 늘리는 방법 
    
    두 가지가 더 있음
    
    ex) 8코어 16스레드다. 
    
    코어는?
    
    - 현대적인 관점에서 cpu라는 용어 재해석부터 해야함
    - 원래는 계산하는 장치를 cpu라고 불렀는데 이제는 하나의 코어가 전통적인 cpu 1개 역할을함
    
    이렇게 코어가 많아지면 싱글, 듀오, 트리플, 쿼드, 헥사코어 이런식으로 부르게된다. 
    
    Q . 그럼 코어 늘리면 연산속도가 빨라지는가? 
    
    A. 꼭 그런건 아니다. 
    
    스레드 - 실행 흐름의 단위
    
    우리는 여기서 스레드를 두가지로 정의한다. 
    
    - 하드웨어적 스레드
    - 소프트웨어적 스레드
    
    하드웨어 스레드 :  하나의 코어가 동시에 처리하는 명령어 단위  
    
    ![스크린샷 2024-05-28 오후 5.34.52.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/2d937bb9-6baa-4f98-93bc-1f40351ef1b7/92f24b1a-93d0-41d2-a266-c572de297b87/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2024-05-28_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_5.34.52.png)
    
    이러면 2코어 4스레드 cpu인거지, 멀티 스레드 프로세서라고 부를 수 있는거지 
    
    *하이퍼스레딩 : 인텔의 멀티스레드 기술
    
    ![스크린샷 2024-05-28 오후 5.38.32.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/2d937bb9-6baa-4f98-93bc-1f40351ef1b7/6d1ee172-5ea2-4a73-82c7-6349c105d8e9/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2024-05-28_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_5.38.32.png)
    
    ---
    
    소프트 웨어 스레드 : 하나의 프로그램에서 독립적으로 실행되는 단위 
    
    ![스크린샷 2024-05-28 오후 5.40.26.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/2d937bb9-6baa-4f98-93bc-1f40351ef1b7/712c9194-9d82-4693-b4ce-ae69e63f54b7/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2024-05-28_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_5.40.26.png)
    
    하나의 프로그램을 동시에 여러개 실행시키기 
    
    하드웨어에 스레드가 한개여고 (1코어1스레드)여도 소프트웨어 스레드는 여러개 만들 수 있다.  
    
    ---
    
    멀티 스레드 프로세서의 가장 큰 핵심은 레지스터
    
    ![스크린샷 2024-05-28 오후 5.43.56.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/2d937bb9-6baa-4f98-93bc-1f40351ef1b7/5960df33-9581-4ee5-94a7-91349ba075d1/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2024-05-28_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_5.43.56.png)
    
    하나의 명령어를 실행하기 위해 필요한 레지스터를 레지스터 세트라고 표기한다. 
    
    하나의 코어가 여러개의 레지스터 세트를 가지고 있다면 멀티 프로세스 설계를 할 수 있다. 
    
    하드웨어 스레드는 논리 프로세서라고 부른다. 
    
- 명령어 병렬 처리기법
    
    *쉽게 표현해서 어떻게 cpu가 시간을 알뜰하게 쓰며 명령어를 처리할 수 있을가 에 대한 문제
    
    ### 명령어 파이프라인
    
    명령어가 처리되는 과정을 비슷한 시간 간격으로 나누면?
    
    1. 명령어 인출
    2. 명령어 해석
    
    1. 명령어 실행
    2. 결과 저장
    
    ![스크린샷 2024-05-28 오후 6.01.56.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/2d937bb9-6baa-4f98-93bc-1f40351ef1b7/620e3e8c-787f-4ffd-a0f3-62b671296bd0/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2024-05-28_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_6.01.56.png)
    
    같은 단계가 겹치지만 않는다면 cpu는 ‘각 단계를 동시에 실행할 수 있다.’
    
    t2 의 경우를 보면 실행, 해석, 인출이 동시에 이뤄지는데 겹치지 않으면 가능
    
    기억 해야할 부분 
    
    명령어 파이프라인이 성능향상에 실패하는 경우
    
    - **파이프라인 위험**
        - 데이터 위험
            - 명령어 간의 의존성에 의해 야기
            - 모든 명령어를 동시에 처리할 수는 없다. (이전 명령어를 끝까지 실행해야만 실행 가능한 경우)
                
                ![스크린샷 2024-05-28 오후 6.12.09.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/2d937bb9-6baa-4f98-93bc-1f40351ef1b7/3e3a0b17-399d-4f2a-a2ba-d673328d06bd/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2024-05-28_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_6.12.09.png)
                
        - 제어 위험
            - 프로그램 카운터의 갑작스런 변화 cpu의 주소번지가 갑자기 점프하거나 인터럽트되면?
        - 구조적 위험
            - 서로 다른 명령어가 같은 CPU부품을 쓰려고 할 때
    
    ### 슈퍼 스칼라
    
    cpu 내부에 여러개의 명령어 파이프라인을 포함한 구조
    
    이론적으로는 파이프라인 개수에 비례하여 처리속도 증가
    
    하지만 파이프라인 위험도의 증가로 인해 파이프 라인 갯수에 비례하여 처리속도가 증가하진 않음
    
    ### 비 순차적 명령어 처리
    
    합법적인 새치기 
    
    파이프라인 중단을 막기 위해 명령어를 순차적으로 처리하지 않는 기법
    
    ![스크린샷 2024-05-28 오후 6.25.08.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/2d937bb9-6baa-4f98-93bc-1f40351ef1b7/f9b0ee4c-36f0-41c7-92c8-31af00d4f762/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2024-05-28_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_6.25.08.png)
    
    ![스크린샷 2024-05-28 오후 6.25.35.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/2d937bb9-6baa-4f98-93bc-1f40351ef1b7/c9e44dc7-1861-44dc-90c4-68a6f06b85d9/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2024-05-28_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_6.25.35.png)
    
    물론 아무 명령어 순서를 바꿀 수 있는건 아니다. 
    
- 명령어 집합구조, CISC와 RISC
    
    명령어가 어떻게 생겨야 명령어 파이프라이닝이 유리할까???
    
    명령어 집합 
    
    “CPU는 명령어를 실행한다.”
    
    근데 이 세상의 모든 CPU가 똑같이 생긴 명령어를 실행할까?
    
    CPU의 연산, 주소지정방식은 다 다르다. 
    
    명령어 집합은 CPU가 이해할 수 있는 명령어들의 모음이다. cpu의 언어인 셈
    
    인텔 cpu는 x86명령어 집합을, 애플 CPU는 ARM명령어 집합을 따른다. 
    
    ![스크린샷 2024-05-28 오후 6.37.28.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/2d937bb9-6baa-4f98-93bc-1f40351ef1b7/3a3d8888-3d96-4b7b-869b-c7b323a4f95e/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2024-05-28_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_6.37.28.png)
    

명령어가 달리지면 그에대한 나비효과로 많은것들이 달라진다. 

명령어 해석방식, 레지스터의 종류와 갯수, 파이프라이닝의 용이성…

CISC & RISC

CISC(complex instruction set computer)

복잡한 명령어 집합을 활용하는 컴퓨터(CPU)

x86, x86-64는 CISC기반의 명령어 집합구조 

그래서 복잡하고 다양한 명령어 활용, 명령어의 형태와 크기가 다양한 가변길이 명령어를 활용 

단점으로는

메모리를 최대한 아끼며 개발해야했던 시절에는 인기가 높았으나, 

명령어 파이프라이닝이 불리하다는 치명적인 단점

- 명령어가 워낙 복잡하고 다양한 기능을 제공하는 탓에
    
    명령어의 크기가 실행되기까지의 시간이 일정하지 않음
    
- 복잡한 명령어 때문에 명령어 하나를 실행하는데에 어러 클럭 주기가 필요
- 대다수의 복잡한 명령어는 사용빈도가 낮다.

RISC(Reduced instruction Set Computer)

명령어의 종류가 적고, 짧고 규격화된 명령어 사용

메모리 접근을 최소화하고 레지스터를 활용함

따라서, 파이프라이닝이 유리함

단점으로는 한 프로그램을 동작시키는데 여러개의 명령어가 필요하다. 

| CISC | RISC |
| --- | --- |
| 복잡하고 다양한 명령어 | 단순하고 적은 명령어 |
| 가변 길이 명령어 | 고정 길이 명령어 |
| 다양한 주소 지정방식 | 적은 주소 지정방식 |
| 프로그램을 이루는 명령어의 수가 적음 | 프로그램을 이루는 명령어의 수가 많음 |
| 여러 클럭에 걸쳐 명령어 수행 | 1클럭 내외로 명령어 수행 |
| 파이프 라이닝 하기어려움 | 파이프 라이닝 하기 쉬움 |